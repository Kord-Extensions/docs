<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#5865F2" data-link-color="#5865F2"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-10-20T16:22:46.915945104"><title>Internationalization (i18n) | Kord Extensions</title><script type="application/json" id="virtual-toc-data">[{"id":"planning","level":0,"title":"Planning","anchor":"#planning"},{"id":"basic-concepts","level":0,"title":"Basic Concepts","anchor":"#basic-concepts"},{"id":"basic-concepts-locales","level":1,"title":"Locales","anchor":"#basic-concepts-locales"},{"id":"basic-concepts-bundles","level":1,"title":"Translation Bundles","anchor":"#basic-concepts-bundles"},{"id":"basic-concepts-keys","level":1,"title":"Translation Keys","anchor":"#basic-concepts-keys"},{"id":"writing-translations","level":0,"title":"Writing Translations","anchor":"#writing-translations"},{"id":"writing-empty-translations","level":1,"title":"Empty Translations","anchor":"#writing-empty-translations"},{"id":"writing-translations-placeholders","level":1,"title":"Placeholder Substitution","anchor":"#writing-translations-placeholders"},{"id":"writing-translations-numeric","level":1,"title":"Numeric Formatting","anchor":"#writing-translations-numeric"},{"id":"writing-translations-selections","level":1,"title":"Selections","anchor":"#writing-translations-selections"},{"id":"using-translations","level":0,"title":"Using Translations","anchor":"#using-translations"},{"id":"using-translations-creating-keys","level":1,"title":"Creating Keys","anchor":"#using-translations-creating-keys"},{"id":"using-translations-configuring-keys","level":1,"title":"Configuring Keys","anchor":"#using-translations-configuring-keys"},{"id":"using-translations-key-utilities","level":1,"title":"Key Utilities","anchor":"#using-translations-key-utilities"},{"id":"using-translations-translating-keys","level":1,"title":"Translating Keys","anchor":"#using-translations-translating-keys"},{"id":"using-translations-putting-together","level":1,"title":"Putting It All Together","anchor":"#using-translations-putting-together"},{"id":"override-bundles","level":0,"title":"Override Bundles","anchor":"#override-bundles"},{"id":"formatters","level":0,"title":"Formatters","anchor":"#formatters"},{"id":"parsers","level":0,"title":"Parsers","anchor":"#parsers"},{"id":"kord-translations","level":0,"title":"Kord Translations","anchor":"#kord-translations"},{"id":"utilities","level":0,"title":"Utilities","anchor":"#utilities"},{"id":"providers","level":0,"title":"Custom Providers","anchor":"#providers"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="frontend/app.css" rel="stylesheet"><link href="static/custom.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Internationalization (i18n) | Kord Extensions"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Kord Extensions Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/internationalization.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Internationalization (i18n) | Kord Extensions"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/internationalization.html#webpage",
    "url": "writerside-documentation/internationalization.html",
    "name": "Internationalization (i18n) | Kord Extensions",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Kord Extensions Help"
}</script><!-- End Schema.org --></head><body data-id="Internationalization" data-main-title="Internationalization (i18n)" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Core-Documentation.topic|Core Documentation ✏️"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kord Extensions  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Internationalization" data-label-id="v2.3.0" id="Internationalization.topic">Internationalization (i18n)</h1><p id="-558syg_4">While some smaller bots are only designed with one language in mind, many larger bots will need to support guilds and users using a variety of languages and locales.</p><p id="-558syg_5">To help with this, Kord Extensions was designed with internationalization (i18n) in mind, and it provides many relevant tools and systems.</p><section class="chapter"><h2 id="planning" data-toc="planning">Planning</h2><p id="-558syg_16">Before you can begin to localize your bots, you'll need to do some planning:</p><ol class="list _decimal" id="-558syg_17" type="1"><li class="list__item" id="-558syg_19"><p id="-558syg_22">Decide on a default locale.</p><p id="-558syg_23">This will be US English for most bots, but you're free to use something else if there's a more suitable locale.</p></li><li class="list__item" id="-558syg_20"><p id="-558syg_24">Consider the depth of your localization work.</p><p id="-558syg_25">Making bots suitable for use in other locales requires extra consideration. Different languages and locales require very different approaches, and it's important to consider what may change between them. For example:</p><ul class="list _bullet" id="-558syg_26"><li class="list__item" id="-558syg_28"><p>Number formats, including things such as currencies, and dates and times.</p></li><li class="list__item" id="-558syg_29"><p>Units, such as those used for weights, volumes and temperatures.</p></li><li class="list__item" id="-558syg_30"><p>Text direction for right-to-left languages.</p></li></ul><p id="-558syg_27">This isn't an exhaustive list &mdash; it's important to do research and chat with folks that speak your bot's target locales.</p></li><li class="list__item" id="-558syg_21"><p id="-558syg_31">Consider what external tooling you'll need.</p><p id="-558syg_32">Automatic translation tools like DeepL and Google Translate can be useful in a small number of situations, but their output is usually inaccurate or otherwise unsuitable for use in your translations.</p><p id="-558syg_33">Instead, consider crowdsourcing translations using tools like <a href="https://weblate.org/en/" id="-558syg_34" data-external="true" rel="noopener noreferrer">Weblate</a> and <a href="https://crowdin.com/" id="-558syg_35" data-external="true" rel="noopener noreferrer">Crowdin</a> &mdash; and get your community involved! There are many tools that support Java Properties files and the ICU Message Format, and lots of them can integrate with your version control system. We recommend shopping around and finding something that suits your project and community.</p></li></ol><p id="-558syg_18">Localizing a bot is often a pretty large undertaking, but it can be very worthwhile!</p></section><section class="chapter"><h2 id="basic-concepts" data-toc="basic-concepts">Basic Concepts</h2><p id="-558syg_36">Kord Extensions approaches i18n in a rather specific way, so it's important to understand a few things.</p><section class="chapter"><h3 id="basic-concepts-locales" data-toc="basic-concepts-locales">Locales</h3><p id="-558syg_40">Locales represent specific geographical, political, or cultural regions. In the context of programming, <code class="code" id="-558syg_44">Locale</code> objects are used to represent a set of language, script, region, variant, and extensions, which can be used together to format all kinds of data or to look up translations.</p><p id="-558syg_41">Discord has a predefined set of supported locales, which may be found <a href="https://discord.com/developers/docs/reference#locales" id="-558syg_45" data-external="true" rel="noopener noreferrer">here</a>. This list of locales represents those supported by the Discord client and isn't an exhaustive list of all possible locales.</p><p id="-558syg_42">Kord Extensions uses locale resolvers to find the relevant <code class="code" id="-558syg_46">Locale</code> object for any given event. You can configure them in <a href="config-internationalization.html" id="-558syg_47" data-tooltip="The i18n builder allows you to configure how the bot should handle translations and other types of internationalization and localization. Kord Extensions supports a number of locales. You can find the current translation progress (or contribute your own translations) on Weblate.">your bot's i18n builder</a>.</p><p id="-558syg_43">You may want to consider writing a custom resolver and allowing users to configure their preferred locale using commands if you want to support locales other than those in the Discord client.</p></section><section class="chapter"><h3 id="basic-concepts-bundles" data-toc="basic-concepts-bundles">Translation Bundles</h3><aside class="prompt" data-type="warning" data-title="" id="-558syg_48"><p><span id="-558syg_55"><b>Translation bundles are UTF-8!</b></span></p><p id="-558syg_56">Prior to Java 9, properties files were assumed to be written using the <code class="code" id="-558syg_58">ISO-8859-1</code> encoding. For this reason, some editors may assume that all properties files are encoded using <code class="code" id="-558syg_59">ISO-8859-1</code>, and you'll need to reconfigure them. We recommend using <a href="https://editorconfig.org/" id="-558syg_60" data-external="true" rel="noopener noreferrer">Editorconfig</a> for this, which JetBrains tools have first-party support for.</p><p id="-558syg_57">Kord Extensions assumes all translation bundles use properties files encoded using <code class="code" id="-558syg_61">UTF-8</code>. You will run into problems if you use any other encoding!</p></aside><p id="-558syg_49">The most important unit in the i18n system is the translation bundle. By default, Kord Extensions uses properties-based Java Resource Bundles, where translations are stored in a set of <code class="code" id="-558syg_62">.properties</code> files with similarly prefixed names. Translation bundles are represented using <code class="code" id="-558syg_63">Bundle</code> objects in code.</p><p id="-558syg_50">The first thing you'll need to do is pick a name for your translation bundle. The name should contain two parts &mdash; the name of the containing folder, and the bundle itself &mdash; split using a dot or period (<code class="code" id="-558syg_64">.</code>). This name is used to locate the resource bundle in your bot's resources, within the <span class="filepath" id="-558syg_65">translations/</span> base directory.</p><p id="-558syg_51">For example, <code class="code" id="-558syg_66">mybot.strings</code> refers to a resource bundle named <code class="code" id="-558syg_67">strings</code> stored within <span class="filepath" id="-558syg_68">translations/mybot/</span> in your bot's resource files.</p><p id="-558syg_52">Your translation bundle must contain a base translation file, with a set of default translations. This file should be named without a locale, so in the above example, it'd be named <code class="code" id="-558syg_69">strings.properties</code>. The translations in this file will be used as a fallback when a translation is missing.</p><p id="-558syg_53">All other translations must be placed in translation files containing the relevant locale code. For example, the locale code for German is <code class="code" id="-558syg_70">de</code>, so a translation file for German in our example would be named <code class="code" id="-558syg_71">strings_de.properties</code>.</p><p id="-558syg_54">For more information on the properties file format, <a href="https://en.wikipedia.org/wiki/.properties#Format" id="-558syg_72" data-external="true" rel="noopener noreferrer">see this page on Wikipedia</a>.</p></section><section class="chapter"><h3 id="basic-concepts-keys" data-toc="basic-concepts-keys">Translation Keys</h3><p id="-558syg_73">A translation key represents a single translation. When you store translations in a properties file, they're referred to by name. For example:</p><div class="code-block" data-lang="ini">
                command.about.name=about
                command.about.description=Learn about this bot.
            </div><p id="-558syg_75">In the above properties file, <code class="code" id="-558syg_77">command.about.name</code> is a translation key, referring to a specific translation.</p><p id="-558syg_76">Translation keys are represented using <code class="code" id="-558syg_78">Key</code> objects in code. These objects may also contain bundle and locale information with predefined replacement values, as explained in below.</p></section></section><section class="chapter"><h2 id="writing-translations" data-toc="writing-translations">Writing Translations</h2><p id="-558syg_79">To quickly recap the previous section: Translations are (by default) written to UTF-8-encoded <code class="code" id="-558syg_85">.properties</code> files, grouped together into a translation bundle. These translations are referred to using a combination of the bundle name and translation key.</p><p id="-558syg_80">Translations are written using <a href="https://unicode-org.github.io/icu/userguide/format_parse/messages/" id="-558syg_86" data-external="true" rel="noopener noreferrer">ICU Message Format</a>, a standard message formatter provided by the Unicode Consortium. This format provides a few useful (but understated) tools that you can use to write better contextual translations.</p><section class="chapter"><h3 id="writing-empty-translations" data-toc="writing-empty-translations">Empty Translations</h3><p id="-558syg_87">For translation keys that support an empty value for specific locales, you may provide a special value for the translation. This value consists of three empty set characters (<code class="code" id="-558syg_90">&empty;&empty;&empty;</code>) and should contain nothing else.</p><p id="-558syg_88"><span id="-558syg_91"><b>Note:</b></span> This value is not supported for all translations. You can use it in the following places:</p><ul class="list _bullet" id="-558syg_89"><li class="list__item" id="-558syg_92"><p><a href="chat-commands.html#anchor-aliases" id="-558syg_96" data-tooltip="Key object representing a comma-separated list of alternative names that may be used to invoke this command.">Chat command aliases</a></p></li><li class="list__item" id="-558syg_93"><p>Ignored words in duration parsers</p></li><li class="list__item" id="-558syg_94"><p><a href="modals.html#anchor-initial-value" id="-558syg_97" data-tooltip="The following properties are available on all text-based Widget types.">Initial values for text input widgets</a></p></li><li class="list__item" id="-558syg_95"><p>Reset words for the PluralKit module</p></li></ul></section><section class="chapter"><h3 id="writing-translations-placeholders" data-toc="writing-translations-placeholders">Placeholder Substitution</h3><p id="-558syg_98">ICU Message Format allowed for two types of placeholders:</p><ul class="list _bullet" id="-558syg_99"><li class="list__item" id="-558syg_102"><p id="-558syg_104"><span id="-558syg_107"><b>Ordinal placeholders:</b></span> <code class="code" id="-558syg_108">Hello, {0}!</code></p><p id="-558syg_105">Ordinal placeholders are filled using an array of arbitrary values. Array indices are specified by placing them within curly braces.</p><p id="-558syg_106">For example, to specify the first element of the array, you would use <code class="code" id="-558syg_109">{0}</code>.</p></li><li class="list__item" id="-558syg_103"><p id="-558syg_110"><span id="-558syg_113"><b>Named placeholders:</b></span> <code class="code" id="-558syg_114">Hello, {name}!</code></p><p id="-558syg_111">Named placeholders are filled using a string-keyed map of arbitrary values. The map's keys are specified by placing them within curly braces.</p><p id="-558syg_112">For example, to specify the <code class="code" id="-558syg_115">name</code> key of the map, you would use <code class="code" id="-558syg_116">{name}</code>.</p></li></ul><p id="-558syg_100">Mixed placeholder types are unsupported, so you'll need to pick one or the other. <span id="-558syg_117"><b>We recommend using named placeholders,</b></span> as they result in more readable translations.</p><p id="-558syg_101">Placeholders are automatically formatted using the default ICU formatter for the corresponding type. However, you can further format placeholders by supplying a style modifier.</p></section><section class="chapter"><h3 id="writing-translations-numeric" data-toc="writing-translations-numeric">Numeric Formatting</h3><p id="-558syg_118">ICU Message Format provides several useful modifiers you can use to format numeric types. The following examples use <code class="code" id="-558syg_123">0</code> in place of any ordinal or named placeholder you may use.</p><section class="chapter"><h4 id="writing-translations-numeric-numbers" data-toc="writing-translations-numeric-numbers">Numbers</h4><ul class="list _bullet" id="-558syg_124"><li class="list__item" id="-558syg_125"><p><span id="-558syg_130"><b>Automatic:</b></span> <code class="code" id="-558syg_131">{0, number}</code> (12.5)</p></li><li class="list__item" id="-558syg_126"><p><span id="-558syg_132"><b>Integer:</b></span> <code class="code" id="-558syg_133">{0, number, integer}</code> (13)</p></li><li class="list__item" id="-558syg_127"><p><span id="-558syg_134"><b>Currency:</b></span> <code class="code" id="-558syg_135">{0, number, currency}</code> ($12.50)</p></li><li class="list__item" id="-558syg_128"><p><span id="-558syg_136"><b>Percent:</b></span> <code class="code" id="-558syg_137">{0, number, percent}</code> (1,250%)</p></li><li class="list__item" id="-558syg_129"><p><span id="-558syg_138"><b>Custom:</b></span> <code class="code" id="-558syg_139">{0, number, ###,###.###}</code> (uses <a href="https://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html" id="-558syg_140" data-external="true" rel="noopener noreferrer">Java's DecimalFormat</a>)</p></li></ul></section><section class="chapter"><h4 id="writing-translations-numeric-dates" data-toc="writing-translations-numeric-dates">Dates</h4><ul class="list _bullet" id="-558syg_141"><li class="list__item" id="-558syg_142"><p><span id="-558syg_148"><b>Automatic:</b></span> <code class="code" id="-558syg_149">{0, date}</code> (Sep 22, 2024)</p></li><li class="list__item" id="-558syg_143"><p><span id="-558syg_150"><b>Short:</b></span> <code class="code" id="-558syg_151">{0, date, short}</code> (9/22/24)</p></li><li class="list__item" id="-558syg_144"><p><span id="-558syg_152"><b>Medium:</b></span> <code class="code" id="-558syg_153">{0, date, medium}</code> (Sep 22, 2024)</p></li><li class="list__item" id="-558syg_145"><p><span id="-558syg_154"><b>Long:</b></span> <code class="code" id="-558syg_155">{0, date, long}</code> (September 22, 2024)</p></li><li class="list__item" id="-558syg_146"><p><span id="-558syg_156"><b>Full:</b></span> <code class="code" id="-558syg_157">{0, date, full}</code> (Sunday, September 22, 2024)</p></li><li class="list__item" id="-558syg_147"><p><span id="-558syg_158"><b>Custom:</b></span> <code class="code" id="-558syg_159">{0, date, dd/MM/yyyy}</code> (uses <a href="https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html" id="-558syg_160" data-external="true" rel="noopener noreferrer">Java's SimpleDateFormat</a>)</p></li></ul></section><section class="chapter"><h4 id="writing-translations-numeric-times" data-toc="writing-translations-numeric-times">Times</h4><ul class="list _bullet" id="-558syg_161"><li class="list__item" id="-558syg_162"><p><span id="-558syg_168"><b>Automatic:</b></span> <code class="code" id="-558syg_169">{0, time}</code> (4:30:00 PM)</p></li><li class="list__item" id="-558syg_163"><p><span id="-558syg_170"><b>Short:</b></span> <code class="code" id="-558syg_171">{0, time, short}</code> (4:30 PM)</p></li><li class="list__item" id="-558syg_164"><p><span id="-558syg_172"><b>Medium:</b></span> <code class="code" id="-558syg_173">{0, time, medium}</code> (4:30:00 PM)</p></li><li class="list__item" id="-558syg_165"><p><span id="-558syg_174"><b>Long:</b></span> <code class="code" id="-558syg_175">{0, time, long}</code> (4:30:00 PM GMT+1)</p></li><li class="list__item" id="-558syg_166"><p><span id="-558syg_176"><b>Full:</b></span> <code class="code" id="-558syg_177">{0, time, full}</code> (4:30:00 PM GMT+1)</p></li><li class="list__item" id="-558syg_167"><p><span id="-558syg_178"><b>Custom:</b></span> <code class="code" id="-558syg_179">{0, time, kk:mm:ss}</code> (uses <a href="https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html" id="-558syg_180" data-external="true" rel="noopener noreferrer">Java's SimpleDateFormat</a>)</p></li></ul></section><section class="chapter"><h4 id="writing-translations-numeric-others" data-toc="writing-translations-numeric-others">Others</h4><p id="-558syg_181"><span id="-558syg_185"><b>Durations:</b></span> <code class="code" id="-558syg_186">{0, duration}</code> - for formatting numbers (representing seconds) as simple durations. For example, <code class="code" id="-558syg_187">123</code> becomes <code class="code" id="-558syg_188">02:03</code> in English.</p><p id="-558syg_182"><span id="-558syg_189"><b>Ordinals:</b></span> <code class="code" id="-558syg_190">{0, ordinal}</code> - for formatting numbers with ordinal suffixes. For example, <code class="code" id="-558syg_191">3</code> becomes <code class="code" id="-558syg_192">3rd</code> in English.</p><p id="-558syg_183"><span id="-558syg_193"><b>Spellouts:</b></span> <code class="code" id="-558syg_194">{0, spellout}</code> - for formatting numbers as text. For example, <code class="code" id="-558syg_195">100</code> becomes <code class="code" id="-558syg_196">one hundred</code> in English.</p><p id="-558syg_184">For more advanced number formatting, see <a href="https://unicode-org.github.io/icu-docs/apidoc/released/icu4j/com/ibm/icu/text/RuleBasedNumberFormat.html" id="-558syg_197" data-external="true" rel="noopener noreferrer">RuleBasedNumberFormat</a>.</p></section></section><section class="chapter"><h3 id="writing-translations-selections" data-toc="writing-translations-selections">Selections</h3><p id="-558syg_198">Selections are a more advanced formatting construct that allows you to provide different translations based on a set of rules. The following examples use <code class="code" id="-558syg_201">0</code> in place of any ordinal or named placeholder you may use.</p><section class="chapter"><h4 id="writing-translations-selections-keywords" data-toc="writing-translations-selections-keywords">Keyword Selections</h4><p id="-558syg_202">Keyword selections allow you to provide a different translation based on the contents of a placeholder. This is done by configuring the <code class="code" id="-558syg_207">select</code> modifier with matching patterns.</p><p id="-558syg_203">A matching pattern uses the form of <code class="code" id="-558syg_208">keyword {translation}</code>, and you may provide multiple patterns separated by spaces. The <code class="code" id="-558syg_209">other</code> pattern is used when no other keywords match the placeholder, and it must always be included in your keyword selection.</p><p id="-558syg_204">Translations may themselves contain placeholders, selectors, and other patterns.</p><p id="-558syg_205">For example, to pick a pronoun based on the given gender, you could do something like this:</p><div class="code-block" data-lang="none">
					{0, select, male {he} female {she} doll {it} other {they}}
				</div></section><section class="chapter"><h4 id="writing-translations-selections-plural" data-toc="writing-translations-selections-plural">Plural Selections</h4><p id="-558syg_210">Plural selections allow you to provide a separate translation based on the value of a numeric placeholder. This is done by configuring the <code class="code" id="-558syg_219">plural</code> modifier with various options and some matching patterns.</p><p id="-558syg_211">Plural selections support a number of options, provided using the form <code class="code" id="-558syg_220">name:value</code> before the matching patterns:</p><ul class="list _bullet" id="-558syg_212"><li class="list__item" id="-558syg_221"><p><code class="code" id="-558syg_222">offset</code> - By providing a number, it will be subtracted from the placeholder's value before being used to match the given cases.</p></li></ul><p id="-558syg_213">A matching pattern uses the form of <code class="code" id="-558syg_223">case {translation}</code>, and you may provide multiple patterns separated by spaces. The <code class="code" id="-558syg_224">other</code> case is used if no other keywords match the placeholder, and it must always be included in your keyword selection. The following default cases are supported:</p><ul class="list _bullet" id="-558syg_214"><li class="list__item" id="-558syg_225"><p><code class="code" id="-558syg_230">zero</code> - Matched when the value is 0.</p></li><li class="list__item" id="-558syg_226"><p><code class="code" id="-558syg_231">one</code> - Matched when the value is 1.</p></li><li class="list__item" id="-558syg_227"><p><code class="code" id="-558syg_232">two</code> - Matched when the value is 2.</p></li><li class="list__item" id="-558syg_228"><p><code class="code" id="-558syg_233">few</code> - Matched when you'd normally say &quot;a few&quot; to represent the value.</p></li><li class="list__item" id="-558syg_229"><p><code class="code" id="-558syg_234">many</code> - Matched when you'd normally say &quot;many&quot; to represent the value.</p></li></ul><p id="-558syg_215">You can also match a specific value by prefixing it with <code class="code" id="-558syg_235">=</code>. For example, to match a value of 7, you could use <code class="code" id="-558syg_236">=7</code>.</p><p id="-558syg_216">Translations may themselves contain placeholders, selectors, and other patterns. Additionally, providing a <code class="code" id="-558syg_237">#</code> in the translation will insert the value of the placeholder.</p><p id="-558syg_217">As an example, if you were hosting a party, you might do something like this:</p><div class="code-block" data-lang="none">
					{guests, plural, offset:1
						zero {{host} does not throw a party.}
						one {{host} invites {guest} to the party.}
						two {{host} invites {guest} and one other person to the party.}
						other {{host} invites {guest} and # other people to the party.}
					}
				</div></section></section></section><section class="chapter"><h2 id="using-translations" data-toc="using-translations">Using Translations</h2><p id="-558syg_238">At its most basic, the translations system only requires you to provide a <code class="code" id="-558syg_245">Key</code> object to a translatable property. The <code class="code" id="-558syg_246">Key</code> objects are instances of an immutable data class, which can contain the following information:</p><ul class="list _bullet" id="-558syg_239"><li class="list__item" id="-558syg_247"><p>A <code class="code" id="-558syg_253">String</code> representing a translation key in a bundle.</p></li><li class="list__item" id="-558syg_248"><p>A <code class="code" id="-558syg_254">Bundle</code> representing the corresponding translation bundle</p></li><li class="list__item" id="-558syg_249"><p>A <code class="code" id="-558syg_255">Locale</code> representing the locale to translate this <code class="code" id="-558syg_256">Key</code> to.</p></li><li class="list__item" id="-558syg_250"><p>A pre-defined array of ordinal placeholders or map of named placeholders.</p></li><li class="list__item" id="-558syg_251"><p>A setting (<code class="code" id="-558syg_257">presetPlaceholderPosition</code>) which defines whether to place pre-defined ordinal placeholders before or after the placeholders provided to a <code class="code" id="-558syg_258">translate</code> call.</p></li><li class="list__item" id="-558syg_252"><p id="-558syg_259">A setting (<code class="code" id="-558syg_261">translateNestedKeys</code>) which defines whether nested <code class="code" id="-558syg_262">Key</code> objects in translation placeholders should also be translated before use.</p><p id="-558syg_260"><span id="-558syg_263"><b>Note:</b></span> This only supports a single level of nesting.</p></li></ul><section class="chapter"><h3 id="using-translations-creating-keys" data-toc="using-translations-creating-keys">Creating Keys</h3><p id="-558syg_264">If you're using <a href="kordex-plugin.html" id="-558syg_267" data-tooltip="Plugin ID: dev.kordex.gradle.kordex">the KordEx Gradle plugin</a>, you can <a href="kordex-plugin.html#settings-i18n" id="-558syg_268" data-tooltip="The Gradle plugin only supports i18n work when using Kord Extensions 2.3.0 or later.">configure it to generate translation classes</a> from your translation bundle.</p><p id="-558syg_265">This is the recommended approach and will result in a tree of translation classes containing generated <code class="code" id="-558syg_269">Key</code> objects that you can reference in your code. If you can't use the Gradle plugin, you can find a CLI tool and an API <a href="https://github.com/Kord-Extensions/i18n" id="-558syg_270" data-external="true" rel="noopener noreferrer">in this GitHub repository</a>, to integrate with your own tooling.</p><p id="-558syg_266">Alternatively, <code class="code" id="-558syg_271">Key</code> objects can be manually constructed as required, or created from <code class="code" id="-558syg_272">String</code> keys using the <code class="code" id="-558syg_273">String.toKey(bundle?, locale?, presetPlaceholderPosition?, translateNestedKeys?)</code> extension function.</p></section><section class="chapter"><h3 id="using-translations-configuring-keys" data-toc="using-translations-configuring-keys">Configuring Keys</h3><p id="-558syg_274"><code class="code" id="-558syg_279">Key</code> objects are immutable, but they provide several functions that allow you to configure cloned objects.</p><p id="-558syg_275">To create a copy of the <code class="code" id="-558syg_280">Key</code> with a bundle or locale, you can use the <code class="code" id="-558syg_281">withBundle</code>, <code class="code" id="-558syg_282">withLocale</code> or <code class="code" id="-558syg_283">withBoth</code> functions, or with the <code class="code" id="-558syg_284">withContext</code> function to copy the locale from a command context. Creating a copy without either a bundle or locale can be done by calling the corresponding <code class="code" id="-558syg_285">without</code> functions.</p><p id="-558syg_276">To create a copy with more pre-defined placeholders, use the <code class="code" id="-558syg_286">withOrdinalPlaceholders</code> or <code class="code" id="-558syg_287">withNamedPlaceholders</code> functions. You can create a copy without pre-defined placeholders by calling the corresponding <code class="code" id="-558syg_288">without</code> functions, or create a copy with a set of filtered placeholders using the corresponding <code class="code" id="-558syg_289">filter</code> functions.</p><p id="-558syg_277">To create a copy with an additional post-processor (which you can use to manipulate the result of a translation), use the <code class="code" id="-558syg_290">wthPostProcessor</code> DSL function. To add multiple, you can use <code class="code" id="-558syg_291">withPostProcessors</code>. It's also possible to remove post-processors using the <code class="code" id="-558syg_292">filterPostProcessors</code> function.</p><p id="-558syg_278">To create a copy with updated settings, use the <code class="code" id="-558syg_293">withPresetPlaceholderPosition</code> or <code class="code" id="-558syg_294">withTranslateNestedKeys</code> functions.</p></section><section class="chapter"><h3 id="using-translations-key-utilities" data-toc="using-translations-key-utilities">Key Utilities</h3><p id="-558syg_295">Kord Extensions provides a number of additional utility functions.</p><ul class="list _bullet" id="-558syg_296"><li class="list__item" id="-558syg_297"><p><code class="code" id="-558syg_302">capitalize</code> - Creates a clone of the current Key, with an additional post-processor which capitalizes the first character of the translated string. It uses the Key's <code class="code" id="-558syg_303">locale</code>, or your bot's configured default locale if one isn't present.</p></li><li class="list__item" id="-558syg_298"><p><code class="code" id="-558syg_304">capitalizeWords</code> - Creates a clone of the current Key, with an additional post-processor which capitalizes each word in the translated string. It uses the Key's <code class="code" id="-558syg_305">locale</code>, or your bot's configured default locale if one isn't present.</p></li><li class="list__item" id="-558syg_299"><p><code class="code" id="-558syg_306">lowercase</code> - Creates a clone of the current Key, with an additional post-processor which lower-cases each character in the translated string. It uses the Key's <code class="code" id="-558syg_307">locale</code>, or your bot's configured default locale if one isn't present.</p></li><li class="list__item" id="-558syg_300"><p><code class="code" id="-558syg_308">uppercase</code> - Creates a clone of the current Key, with an additional post-processor which upper-cases each character in the translated string. It uses the Key's <code class="code" id="-558syg_309">locale</code>, or your bot's configured default locale if one isn't present.</p></li><li class="list__item" id="-558syg_301"><p><code class="code" id="-558syg_310">withContext</code> - Creates a clone of the current Key, updating its stored <code class="code" id="-558syg_311">locale</code> to match the one corresponding with the given <code class="code" id="-558syg_312">CommandContext</code>.</p></li></ul></section><section class="chapter"><h3 id="using-translations-translating-keys" data-toc="using-translations-translating-keys">Translating Keys</h3><p id="-558syg_313">When you find a property or function expecting a <code class="code" id="-558syg_318">Key</code> object, it's enough to configure the key as explained above and use it directly. For situations where you need to translate a <code class="code" id="-558syg_319">Key</code> yourself, you'll need to use one of the provided translation functions.</p><p id="-558syg_314">The <code class="code" id="-558syg_320">translate</code> and <code class="code" id="-558syg_321">translateArray</code> functions can be used to translate the current <code class="code" id="-558syg_322">Key</code> with a set of ordinal placeholders. If any pre-defined ordinal placeholders are present, they'll be used based on the <code class="code" id="-558syg_323">presetPlaceholderPosition</code> setting.</p><p id="-558syg_315">The <code class="code" id="-558syg_324">translateNamed</code> function can be used to translate the current <code class="code" id="-558syg_325">Key</code> with a set of named placeholders. If any pre-defined named placeholders are present, they'll be used based on the <code class="code" id="-558syg_326">presetPlaceholderPosition</code> setting.</p><aside class="prompt" data-type="note" data-title="" id="-558syg_316"><p>If you call the <code class="code" id="-558syg_327">translate</code> function without any placeholders, and you have pre-defined named placeholders set, this function will call <code class="code" id="-558syg_328">translateNamed</code> for you.</p></aside><p id="-558syg_317">All translation functions include a version suffixed with <code class="code" id="-558syg_329">Locale</code>, which will use the given locale for translation if the <code class="code" id="-558syg_330">Key</code> doesn't already have a locale set.</p></section><section class="chapter"><h3 id="using-translations-putting-together" data-toc="using-translations-putting-together">Putting It All Together</h3><p id="-558syg_331">To better illustrate how you might use translation keys, consider this example:</p><div class="code-block" data-lang="kotlin">
				// Assume we're in an Extension's `setup` function

				publicSlashCommand {
					// Name and description properties take Keys directly.
					name = Translations.Commands.About.name
					description = Translations.Commands.About.description

					action {
						respond {
							embed {
								// Translate keys for String properties.
								title = Translations.Embeds.About.title
									.withContext(this@action)
									.translateNamed(&quot;botName&quot; to &quot;My Bot&quot;)

								description = Translations.Embeds.About.description
									.withContext(this@action)
									.translateNamed(&quot;triggeringUser&quot; to user.mention)
							}
						}
					}
				}
			</div></section></section><section class="chapter"><h2 id="override-bundles" data-toc="override-bundles">Override Bundles</h2><p id="-558syg_333">In addition to the normal translation bundles explained above, it's possible to override translations provided by other bundles. You can do this by creating your own translation bundle files, suffixing <code class="code" id="-558syg_336">_override</code> to the bundle name.</p><p id="-558syg_334">For example, to override the default translations in the <code class="code" id="-558syg_337">kordex.strings</code> bundle, you could create <span class="filepath" id="-558syg_338">translations/kordex/strings_override.properties</span>, and add the keys you wish to override.</p><aside class="prompt" data-type="note" data-title="" id="-558syg_335"><p id="-558syg_339">Because of the complexities involved with loading translations from plugins, please note that override bundles may not work quite as expected when they exist in a different class-loader from the original bundle.</p><p id="-558syg_340">We generally recommend against overriding translations unless absolutely necessary. If you notice an issue with a translation, please report it to the relevant project instead if possible.</p></aside></section><section class="chapter"><h2 id="formatters" data-toc="formatters">Formatters</h2><p id="-558syg_341">A number of locale-aware formatters are available for formatting rich types into human-readable strings.</p><ul class="list _bullet" id="-558syg_342"><li class="list__item" id="-558syg_343"><p><code class="code" id="-558syg_344">DateTimePeriod.format(Locale)</code> - uses <a href="https://unicode-org.github.io/icu-docs/apidoc/released/icu4j/com/ibm/icu/util/Measure.html" id="-558syg_345" data-external="true" rel="noopener noreferrer">ICU4J Measures</a> to create a duration-like string.</p></li></ul></section><section class="chapter"><h2 id="parsers" data-toc="parsers">Parsers</h2><p id="-558syg_346">A number of locale-aware parsers are available for parsing strings into rich types. These parsers are cached when appropriate and allow you to convert various values without worrying about writing translations yourself.</p><ul class="list _bullet" id="-558syg_347"><li class="list__item" id="-558syg_348"><p id="-558syg_351"><code class="code" id="-558syg_354">BooleanParser</code> - a string parser which can parse truthy and falsey values from strings in a locale-aware manner. This parser is used by the boolean converters, and it's also used by <code class="code" id="-558syg_355">String.parseBoolean(Locale)</code>.</p><p id="-558syg_352">The relevant translation keys are <code class="code" id="-558syg_356">utils.string.false</code> and <code class="code" id="-558syg_357">utils.string.true</code>, and multiple comma-separated values are supported for each key.</p><p id="-558syg_353">If a value can't be parsed, this parser returns <code class="code" id="-558syg_358">null</code>.</p></li><li class="list__item" id="-558syg_349"><p id="-558syg_359"><code class="code" id="-558syg_363">ColorParser</code> - a string parser which can parse Discord branding colours from strings in a locale-aware manner. This parser is used by the color converters and it supports black, blurple, fuchsia, green, red, white, and yellow.</p><p id="-558syg_360">The relevant translation keys are <code class="code" id="-558syg_364">utils.colors.black</code>, <code class="code" id="-558syg_365">utils.colors.blurple</code>, <code class="code" id="-558syg_366">utils.colors.fuchsia</code>, <code class="code" id="-558syg_367">utils.colors.green</code>, <code class="code" id="-558syg_368">utils.colors.red</code>, <code class="code" id="-558syg_369">utils.colors.white</code>, and <code class="code" id="-558syg_370">utils.string.yellow</code>, and multiple comma-separated values are supported for each key.</p><p id="-558syg_361">Translations for blurple include &quot;purple,&quot; and translations for fuchsia include &quot;pink.&quot;</p><p id="-558syg_362">If a value can't be parsed, this parser returns <code class="code" id="-558syg_371">null</code>.</p></li><li class="list__item" id="-558syg_350"><p id="-558syg_372"><code class="code" id="-558syg_377">DurationParser</code> - a string parser which can parse <code class="code" id="-558syg_378">DateTimePeriod</code> objects from strings in a locale-aware manner. This parser is used by the duration converters.</p><p id="-558syg_373">This (surprisingly complex) parser supports positive and negative durations specified in a number of forms. Bare numbers are not supported.</p><ul class="list _bullet" id="-558syg_374"><li class="list__item" id="-558syg_379"><p><span id="-558syg_381"><b>Long:</b></span> <code class="code" id="-558syg_382">1 day, 2 hours, 3 minutes, 4 seconds</code></p></li><li class="list__item" id="-558syg_380"><p><span id="-558syg_383"><b>Short:</b></span> <code class="code" id="-558syg_384">1d2h3m4s</code></p></li></ul><p id="-558syg_375">All supported forms may be written right-to-left or left-to-right, as long as they're written consistently.</p><p id="-558syg_376">The relevant translation keys are <code class="code" id="-558syg_385">utils.units.day</code>, <code class="code" id="-558syg_386">utils.units.week</code>, <code class="code" id="-558syg_387">utils.units.month</code>, <code class="code" id="-558syg_388">utils.units.year</code>, <code class="code" id="-558syg_389">utils.units.hour</code>, <code class="code" id="-558syg_390">utils.colors.minute</code>, and <code class="code" id="-558syg_391">utils.string.second</code>, and multiple comma-separated values are supported for each key.</p></li></ul></section><section class="chapter"><h2 id="kord-translations" data-toc="kord-translations">Kord Translations</h2><p id="-558syg_392">Kord Extensions provides translations for multiple Kord types, which may be useful for display to users on Discord. This is exposed via <code class="code" id="-558syg_394">toTranslationKey</code> and <code class="code" id="-558syg_395">translate</code> extension functions against the following types:</p><ul class="list _bullet" id="-558syg_393"><li class="list__item" id="-558syg_396"><p><code class="code" id="-558syg_398">NsfwLevel</code> - translation keys starting with <code class="code" id="-558syg_399">nsfwLevel.</code></p></li><li class="list__item" id="-558syg_397"><p><code class="code" id="-558syg_400">Permission</code> - translation keys starting with <code class="code" id="-558syg_401">permission.</code></p></li></ul></section><section class="chapter"><h2 id="utilities" data-toc="utilities">Utilities</h2><p id="-558syg_402">A number of miscellaneous utilities for working with the translations system are available.</p><ul class="list _bullet" id="-558syg_403"><li class="list__item" id="-558syg_404"><p><code class="code" id="-558syg_407">EMPTY_KEY</code> - a <code class="code" id="-558syg_408">Key</code> object referencing the empty string, useful as a default value in some situations (such as paginators with a single group).</p></li><li class="list__item" id="-558syg_405"><p><code class="code" id="-558syg_409">EMPTY_VALUE_STRING</code> - a special string value representing an &quot;empty&quot; or &quot;missing&quot; value. This is a standard &quot;nothing&quot; value, and you should check for it when you need one. The string contains three empty set characters (<code class="code" id="-558syg_410">&empty;&empty;&empty;</code>).</p></li><li class="list__item" id="-558syg_406"><p><code class="code" id="-558syg_411">SupportedLocales</code> - a collection of Locale objects representing locales with partial or full translations bundled with Kord Extensions.</p></li></ul></section><section class="chapter"><h2 id="providers" data-toc="providers">Custom Providers</h2><p id="-558syg_412">While we recommend sticking with the bundled <code class="code" id="-558syg_414">ResourceBundleTranslations</code> provider, we recognize that there may be cases where the default provider is unsuitable.</p><p id="-558syg_413">In situations like that, you can extend the <code class="code" id="-558syg_415">ResourceBundleTranslations</code> or <code class="code" id="-558syg_416">TranslationsProvider</code> types, and configure <a href="config-internationalization.html#builders" id="-558syg_417" data-tooltip="Register a locale resolver. Locale resolvers are callables that return a Locale object based on the parameters passed to it. For more information, see the i18n documentation.">your bot's translation provider</a>.</p></section><div class="last-modified">Last modified: 20 October 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="modals.html" class="navigation-links__prev">Modals</a><a href="utilities.html" class="navigation-links__next">Utilities ⏳</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="frontend/app.js"></script></body></html>